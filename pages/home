<style>
    .layout_hours{
        display:none;
    }
</style>
<div class="content_container">
    <div class="right_nav">
        <div class="home_hours">
            <h4 class="home_hours_heading">HOURS</h4>
            <table role="presentation">
                <tr>
                    <td class="hours_day">
                        Monday to Friday
                    </td>
                    <td id="monday_home_container">
                        <script id="monday_home_template" type="x-tmpl-mustache/text">
                            {{h}}
                        </script>
                    </td>
                </tr>
                <tr>
                    <td class="hours_day">
                        Saturday
                    </td>
                    <td id="saturday_home_container">
                        <script id="saturday_home_template" type="x-tmpl-mustache/text">
                            {{h}}
                        </script>
                    </td>
                </tr>
                <tr>
                    <td class="hours_day">
                        Sunday
                    </td>
                    <td id="sunday_home_container">
                        <script id="sunday_home_template" type="x-tmpl-mustache/text">
                            {{h}}
                        </script>
                    </td>
                </tr>
            </table>
        </div>
        
        <div class="home_store_directory">
            <a href="/map" class="home_map_">
                <h4 class="home_store_directory_heading">Map & Store Directory</h4>
                <img src="http://kodekloud.s3.amazonaws.com/sites/554a79236e6f64713f000000/69e8cd982124dc73de1f5a67a627ee75/home_icon_map.png" class="" alt="map">
            </a>
        </div>
    </div>
    <div class="feature_box">
        <h4 class="feature_box_heading">FEATURED</h4>
        <div class="feature_container" id="feature_items">
            <script id="feature_template" type="x-tmpl-mustache/text">
                <div class="feature_item ">
                    <img src="{{image_url}}" />
                    <div class="feature_item_description">
                        <p><a href="{{url}}">{{name}}<span class="feature_caret fa fa-caret-right"></span></a></p>
                    </div>
                </div>
            </script>
        </div>
        
    </div>
</div>
<script>
    
    $(document).ready(function() {
        init();
        function renderPageData (){
            var hours = getPropertyHours();
            var latest_store_event = getStoreEventsList().reverse()[0];
            var latest_mall_event = getPropertyEventsList().reverse()[0];
            if (latest_mall_event){
                renderSideEvents('#latest_mall_event_container', '#latest_mall_event_template', latest_mall_event);
            }
            if (latest_store_event){
                renderSideEvents('#latest_store_event_container', '#latest_store_event_template', latest_store_event);
            } 
            var featureList = getFeatureList();
            renderFeatureItems('#feature_template', '#feature_items', featureList)
            
            var monday_hours = getRegHoursForDayIndex(1);
            var saturday_hours = getRegHoursForDayIndex(6);
            var sunday_hours = getRegHoursForDayIndex(0);
            
            renderLayoutHours('#monday_home_container', '#monday_home_template', monday_hours);
            renderLayoutHours('#saturday_home_container', '#saturday_home_template', saturday_hours);
            renderLayoutHours('#sunday_home_container', '#sunday_home_template', sunday_hours);
        }
        
        function renderFeatureItems(feature_template,feature_items,featureList){
            var item_list = [];
            var item_rendered = [];
            var feature_template_html = $(feature_template).html();
            Mustache.parse(feature_template_html);   // optional, speeds up future uses
            count = 0
            $.each( featureList , function( key, val ) {
                if (count < 3){
                val.alt_url = val.image_url;
                var featureitem_rendered = Mustache.render(feature_template_html,val);
                item_rendered.push(featureitem_rendered);
                count = count + 1    
                }
               
            });
            
           
            $(feature_items).show();
            $(feature_items).html(item_rendered.join(''));
            $(".modal-backdrop").remove();
            
        }
        loadMallData(renderPageData);
    })
</script>